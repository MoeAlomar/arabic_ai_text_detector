import pandas as pd
from google import genai
from google.genai import types

# --- ุฅุนุฏุงุฏุงุช ุณุฑูุนุฉ ---
INPUT_FILENAME = "current_datasetCSV.csv"
TEXT_COLUMN = "human_collected_dataset"
MODEL_NAME = "gemini-2.5-flash"

# --- ุงูุชุญุฏูุซ ุงูุฌุฏูุฏ ููุชุนูููุงุช (System Instruction) ---
# ุชู ุชุบููุฑ ุงูุชุนูููุงุช ูุชุฌุจุฑ ุงููููุฐุฌ ุนูู ุงูุจูุงุก ูู ุงูููุฌุฉ ุงูุนุงููุฉ ูุนุฏู ุงูุชุญูู ูููุตุญู
SYSTEM_INSTRUCTION = (
    "ุฃูุช ุดุงุจ ุฎุจูุฑ ูู ุงูุชูููุฉ ูุชุชุญุฏุซ ุจุงูููุฌุฉ ุงูุนุงููุฉ (ุงูุณุนูุฏูุฉ/ุงูุฎููุฌูุฉ). \n"
    "ูููุชู: ุฃุนุฏ ุตูุงุบุฉ ุงูุชุนููู ุงูุชุงูู ุจุฃุณููุจู ุงูุฎุงุตุ ุจุญูุซ ูุจุฏู ููุฃูู ุชุนููู ุฌุฏูุฏ ูู ุดุฎุต ุขุฎุฑุ ููู ุจููุณ ุงูุฑูุญ ูุงูุนูููุฉ.\n"
    "\n"
    "๐ซ **ููููุนุงุช (ุฎุท ุฃุญูุฑ):**\n"
    "- **ูุง ุชุญูู ุงููุต ูููุตุญู ุฃุจุฏุงู.** (ูุง ุชูุชุจ: 'ูุบุงูุฉ'ุ 'ุจูุฏ ุฃู'ุ 'ุฃุฎู ุงููุงุถู'ุ 'ูุง ูุฑูุนุฉ').\n"
    "- ูุง ุชุชุฑุฌู ุงููุตุทูุญุงุช ุงูุชูููุฉ (ุฎูู ุนูู 'ุจู ุณู'ุ 'ููุฑูุงุช'ุ 'ุงูุชู ูุงูุฑูุณ').\n"
    "\n"
    "โ **ุงููุทููุจ:**\n"
    "1. **ุงูููุฌุฉ:** ุงุณุชุฎุฏู ููุณ ุงูููุฌุฉ ุงูุนุงููุฉ ูููุต ุงูุฃุตูู. ุงุฐุง ูุงู ูููู 'ุฃุจุบุง' ุงูุชุจ 'ุฃุจู' ุฃู 'ูุญุชุงุฌ'ุ ูุง ุชูุชุจ 'ุฃุฑูุฏ'.\n"
    "2. **ุงููุตุทูุญุงุช:** ุญุงูุธ ุนูู ุงููุตุทูุญุงุช ุงูุฅูุฌููุฒูุฉ ูุงูุฅูููุฌู ูุฃููุง ุฌุฒุก ูู ุฌู ุงููุต.\n"
    "3. **ุงูุชุบููุฑ:** ุบูุฑ ุชุฑุชูุจ ุงูููุงูุ ุบูุฑ ุจุฏุงูุงุช ุงูุฌููุ ุงุณุชุฎุฏู ูููุงุช ุนุงููุฉ ุจุฏููุฉ.\n"
    "4. **ุงูุฐูุงุก:** ุงุฌุนู ุงููุต ูุฑุชุจุงู ููุชูุงุณูุงู ุฃูุซุฑ ูู ุงููุต ุงูุฃุตูู (ุตุญุญ ุงูุฅููุงุก ุงูุจุณูุทุ ุฑุชุจ ุงูุฃููุงุฑ) ููู ุฏูู ุฃู ูููุฏ ูููุชู ุงูุนุงููุฉ.\n"
    "\n"
    "ุงููุฎุฑุฌุงุช: ุงููุต ุงููุนุงุฏ ุตูุงุบุชู ููุท."
    "\n--- ุงููุต ุงูุฃุตูู ---"
)

client = genai.Client()

df = pd.read_csv(INPUT_FILENAME)

# --- ุงูุชุบููุฑ ููุง: ุฃุฎุฐ ุนููุฉ ุนุดูุงุฆูุฉ ุจุฏูุงู ูู ุฃูู ุงูุตููู ---
# ูุฎุชุงุฑ 5 ุตููู ุนุดูุงุฆูุฉ ุชูุงูุงู ูู ุงูุจูุงูุงุช ููุชุฃูุฏ ุฃู ุงูุฃุณููุจ ูุนูู ุนูู ูู ุงูุฏุงุชุง
df_sample = df.sample(n=5).copy()

print("\n--- ๐ ุจุฏุก ูุญุต ุงูุฌูุฏุฉ ุงูุณุฑูุน (ุนููุฉ ุนุดูุงุฆูุฉ ูู 5 ุตููู) ---\n")

for index, row in df_sample.iterrows():
    text = row[TEXT_COLUMN]
    
    # ุฏูุฌ ุงูุชุนูููุงุช ูุน ุงููุต
    full_prompt = SYSTEM_INSTRUCTION + "\n" + str(text)
    
    try:
        response = client.models.generate_content(
            model=MODEL_NAME,
            contents=[types.Content(role='user', parts=[types.Part(text=full_prompt)])]
        )
        rephrased = response.text.strip().replace('"', '')
        
        print(f"๐น ุงูุฃุตู (ุตู {index}): {str(text)[:100]}...")
        print(f"๐ธ ุงูุฌุฏูุฏ: {rephrased[:100]}...")
        print("-" * 40)
    except Exception as e:
        print(f"โ๏ธ Error: {e}")

print("\nโ ุงูุชูู ุงููุญุต. ูุงุฑู ุงููุชูุฌุฉ ุงูุขู!")